const n=document.querySelector('meta[name="csrf-token"]').getAttribute("content");function s(a){$.ajax({url:"master/customer/get-total-new-customer",type:"GET",data:{period:a},headers:{"X-CSRF-TOKEN":n},success:function(t){console.log(t),$("#totalNewCustomer").text(t.total_new_customer)},error:function(t,o,r){toastr.error("Gagal memuat total pelanggan baru","Error"),console.log("Failed to load new Customer: "+r)}})}function i(a){$.ajax({url:"inventory/product/get-total-new-product",type:"GET",data:{period:a},headers:{"X-CSRF-TOKEN":n},success:function(t){console.log(t),$("#totalNewProduct").text(t.total_new_product)},error:function(t,o,r){toastr.error("Gagal memuat total Barang baru","Error"),console.log("Failed to load new Product: "+r)}})}function u(a){$.ajax({url:"transaction/sales-order/get-total-sales",type:"GET",data:{period:a},headers:{"X-CSRF-TOKEN":n},success:function(t){const o=parseFloat(t.total_sales).toLocaleString("id-ID");$("#totalSales").text("Rp "+o)},error:function(t,o,r){toastr.error("Gagal memuat total Penjualan","Error"),console.log("Failed to load total sales: "+r)}})}function c(){$.ajax({url:"transaction/purchase-order/get-total-on-going-po",type:"GET",headers:{"X-CSRF-TOKEN":n},success:function(a){console.log(a),$("#totalOnGoingPo").text(a.total_on_going_po)},error:function(a,t,o){toastr.error("Gagal memuat total pesanan sedang dikirim","Error"),console.log("Failed to load total on going PO: "+o)}})}function d(){$.ajax({url:"inventory/product/get-top-profit-generating-product",type:"GET",headers:{"X-CSRF-TOKEN":n},success:function(a){var t=a.map(function(e){return{x:e.name,y:e.total_profit/1e6,sold_quantity:`(Terjual ${e.total_sold_quantity} ${e.uom})`}}),o={chart:{type:"bar",height:400},series:[{name:"Total Keuntungan",data:t.map(e=>e.y)}],xaxis:{categories:t.map(e=>e.x)},plotOptions:{bar:{horizontal:!1,columnWidth:"45%",endingShape:"rounded"}},stroke:{show:!0,width:2,colors:["transparent"]},yaxis:{title:{text:"Rupiah (Juta)"}},fill:{opacity:1},tooltip:{y:{formatter:function(e,l){return"Rp "+e.toLocaleString("id-ID")+" juta "+t[l.dataPointIndex].sold_quantity}}}},r=new ApexCharts(document.querySelector("#topProfitGeneratingProductChart"),o);r.render()},error:function(a,t,o){toastr.error("Gagal memuat Barang dengan Total Keuntungan Tertinggi","Error"),console.log("Failed to load Top Profit Generating Product: "+o)}})}$(function(){s("month"),i("month"),u("month"),c(),d()});$("#incompletePaymentDatatable").DataTable({processing:!0,serverSide:!0,scrollX:!0,ajax:"/transaction/sales-order/browse-incomplete-payment",columns:[{data:"so_code",name:"so_code",sortable:!1},{data:"customer",name:"customer",sortable:!1},{data:"grand_total",name:"grand_total",sortable:!1,render:function(a){return"Rp "+parseFloat(a).toLocaleString("id-ID")}},{data:"paid_amount",name:"paid_amount",sortable:!1,render:function(a){return"Rp "+parseFloat(a).toLocaleString("id-ID")}}],language:{lengthMenu:"Tampilkan _MENU_ data",zeroRecords:"Semua Transaksi Telah Lunas ðŸ”¥",info:"Halaman _PAGE_ dari _PAGES_",infoEmpty:"Data tidak ditemukan ",infoFiltered:"(Difilter dari _MAX_ data)"},dom:'<"row"tr<"px-4 my-1 col-md-6"i><"px-4 mt-1 mb-3 col-md-6"p>>'});$("#lowStockDatatable").DataTable({processing:!0,serverSide:!0,scrollX:!0,ajax:"/inventory/product/browse-low-stock-product",columns:[{data:"name",name:"name",sortable:!1},{data:"stock",name:"stock",sortable:!1}],language:{lengthMenu:"Tampilkan _MENU_ data",zeroRecords:"Semua Stok Barang Masih Aman ðŸ‘Œ",info:"Halaman _PAGE_ dari _PAGES_",infoEmpty:"Data tidak ditemukan ",infoFiltered:"(Difilter dari _MAX_ data)"},dom:'<"row"tr<"px-4 my-1 col-md-6"i><"px-4 mt-1 mb-3 col-md-6"p>>'});
